<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Patient Portal - EMR Dashboard | MediCare Hospital</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">
  <link href="css/patient-portal.css" rel="stylesheet">
  <link href="css/dashboard-patient.css" rel="stylesheet">
  <link href="css/emr-interactive.css" rel="stylesheet">
</head>
<body class="portal-body dashboard-patient">

  <!-- Overlay for mobile drawer -->
  <div class="dash-overlay" id="dashOverlay" aria-hidden="true"></div>

  <!-- Sidebar - Collapsible rail (desktop) / Off-canvas (mobile) -->
  <aside class="dash-sidebar" id="dashSidebar" aria-label="Main navigation">
    <div class="dash-sidebar-header">
      <i class="fas fa-hospital"></i>
      <h2>MediCare</h2>
    </div>
    <nav>
      <ul class="dash-sidebar-nav">
        <li>
          <a href="#dashboard" class="dash-sidebar-nav-link active">
            <span class="dash-nav-icon-wrap"><i class="fas fa-chart-line"></i></span>
            <span class="dash-nav-label">Dashboard</span>
          </a>
        </li>
        <li>
          <a href="emr-portal/medical-history.html" class="dash-sidebar-nav-link">
            <span class="dash-nav-icon-wrap"><i class="fas fa-history"></i></span>
            <span class="dash-nav-label">Medical History</span>
          </a>
        </li>
        <li>
          <a href="emr-portal/lab-results.html" class="dash-sidebar-nav-link">
            <span class="dash-nav-icon-wrap"><i class="fas fa-flask"></i></span>
            <span class="dash-nav-label">Lab Results</span>
          </a>
        </li>
        <li>
          <a href="emr-portal/imaging.html" class="dash-sidebar-nav-link">
            <span class="dash-nav-icon-wrap"><i class="fas fa-image"></i></span>
            <span class="dash-nav-label">Imaging & Scans</span>
          </a>
        </li>
        <li>
          <a href="emr-portal/prescriptions.html" class="dash-sidebar-nav-link">
            <span class="dash-nav-icon-wrap"><i class="fas fa-prescription-bottle"></i></span>
            <span class="dash-nav-label">E-Prescriptions</span>
          </a>
        </li>
        <li>
          <a href="emr-portal/appointments.html" class="dash-sidebar-nav-link">
            <span class="dash-nav-icon-wrap"><i class="fas fa-calendar-check"></i></span>
            <span class="dash-nav-label">Appointments</span>
          </a>
        </li>
        <li>
          <a href="emr-portal/messages.html" class="dash-sidebar-nav-link">
            <span class="dash-nav-icon-wrap">
              <i class="fas fa-envelope"></i>
            </span>
            <span class="dash-nav-label">Messages</span>
            <span class="dash-nav-badge">3</span>
          </a>
        </li>
        <li>
          <a href="emr-portal/billing.html" class="dash-sidebar-nav-link">
            <span class="dash-nav-icon-wrap"><i class="fas fa-receipt"></i></span>
            <span class="dash-nav-label">Billing</span>
          </a>
        </li>
        <li>
          <a href="emr-portal/settings.html" class="dash-sidebar-nav-link">
            <span class="dash-nav-icon-wrap"><i class="fas fa-cog"></i></span>
            <span class="dash-nav-label">Settings</span>
          </a>
        </li>
      </ul>
    </nav>
    <div class="dash-sidebar-footer">
      <a href="index.html" class="btn-logout">
        <i class="fas fa-sign-out-alt"></i>
        <span>Logout</span>
      </a>
    </div>
  </aside>

  <button class="dash-sidebar-toggle" id="dashSidebarToggle" aria-label="Toggle menu">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Main Content -->
  <main class="dash-main">
    <header class="dash-header d-flex align-items-center justify-content-between gap-3">
      <!-- Left: Notification Bell (dropdown trigger) -->
      <div class="dash-header-left d-flex align-items-center">
        <div class="dash-notification-wrap">
          <button type="button" class="dash-notification has-badge" id="dashNotification" aria-label="Notifications" aria-expanded="false" aria-haspopup="true" aria-controls="dashNotificationDropdown">
            <i class="fas fa-bell" aria-hidden="true"></i>
            <span class="dash-notification-badge">5</span>
          </button>
          <div class="dash-notification-dropdown dropdown-menu-start" id="dashNotificationDropdown" role="menu" aria-label="Notification panel" aria-hidden="true">
            <div class="dash-notification-tabs">
              <button type="button" class="dash-notification-tab active" data-tab="unread" aria-selected="true">Unread</button>
              <button type="button" class="dash-notification-tab" data-tab="all" aria-selected="false">All</button>
            </div>
            <div class="dash-notification-list" data-tab-content="unread">
              <div class="dash-notification-item unread">
                <i class="fas fa-flask dash-notification-icon" aria-hidden="true"></i>
                <div>
                  <strong>New Lab Results</strong>
                  <p class="dash-caption mb-0">Blood panel from Jan 15 is ready for review.</p>
                </div>
              </div>
              <div class="dash-notification-item unread">
                <i class="fas fa-calendar-check dash-notification-icon" aria-hidden="true"></i>
                <div>
                  <strong>Upcoming Appointment</strong>
                  <p class="dash-caption mb-0">Cardiology follow-up with Dr. Smith tomorrow at 2:30 PM.</p>
                </div>
              </div>
            </div>
            <div class="dash-notification-list d-none" data-tab-content="all">
              <div class="dash-notification-item unread">
                <i class="fas fa-flask dash-notification-icon" aria-hidden="true"></i>
                <div>
                  <strong>New Lab Results</strong>
                  <p class="dash-caption mb-0">Blood panel from Jan 15 is ready for review.</p>
                </div>
              </div>
              <div class="dash-notification-item unread">
                <i class="fas fa-calendar-check dash-notification-icon" aria-hidden="true"></i>
                <div>
                  <strong>Upcoming Appointment</strong>
                  <p class="dash-caption mb-0">Cardiology follow-up with Dr. Smith tomorrow at 2:30 PM.</p>
                </div>
              </div>
              <div class="dash-notification-item">
                <i class="fas fa-check-circle dash-notification-icon" aria-hidden="true"></i>
                <div>
                  <strong>Prescription Refilled</strong>
                  <p class="dash-caption mb-0">Lisinopril refill approved on Jan 10.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Center: Global Search with Recent Patients dropdown -->
      <div class="dash-header-search dash-search-wrapper flex-grow-1" id="dashSearchWrapper">
        <i class="fas fa-search" aria-hidden="true"></i>
        <input type="text" id="dashGlobalSearch" placeholder="Search records, tests, doctors..." aria-label="Global search" aria-expanded="false" aria-haspopup="listbox" aria-controls="dashRecentPatients">
        <div class="dash-search-dropdown" id="dashRecentPatients" role="listbox" aria-label="Recent patients" aria-hidden="true">
          <div class="dash-search-dropdown-header">Recent Patients</div>
          <a href="#" class="dash-search-dropdown-item" role="option">Robert Johnson (RJ-20240524)</a>
          <a href="#" class="dash-search-dropdown-item" role="option">Margaret Chen (MC-20240115)</a>
          <a href="#" class="dash-search-dropdown-item" role="option">David Williams (DW-20231201)</a>
        </div>
      </div>
      <!-- Right: Profile (Robert Johnson + Avatar) -->
      <div class="dash-header-right d-flex align-items-center ms-auto">
        <div class="dash-user-wrap">
          <div class="dash-user">
            <button type="button" class="dash-avatar dash-avatar-trigger" id="dashPatientActions" aria-label="Patient actions" aria-expanded="false" aria-haspopup="true" aria-controls="dashPatientActionsMenu">
              RJ
            </button>
            <div class="dash-user-info">
              <h4 class="mb-0">Robert Johnson</h4>
              <p class="dash-user-id mb-0">Patient ID: RJ-20240524</p>
            </div>
          </div>
          <div class="dash-actions-menu" id="dashPatientActionsMenu" role="menu" aria-label="Patient actions menu" aria-hidden="true">
            <button type="button" role="menuitem" class="dash-actions-menu-item"><i class="fas fa-user-edit" aria-hidden="true"></i> Edit Profile</button>
            <button type="button" role="menuitem" class="dash-actions-menu-item"><i class="fas fa-file-export" aria-hidden="true"></i> Export Records</button>
            <button type="button" role="menuitem" class="dash-actions-menu-item"><i class="fas fa-exchange-alt" aria-hidden="true"></i> Transfer Patient</button>
          </div>
        </div>
      </div>
    </header>

    <div class="dash-content">
      <div class="dash-page-header">
        <h1>Welcome Back, Robert!</h1>
        <p class="dash-breadcrumb">Dashboard / Health Overview</p>
      </div>

      <!-- Stat Cards Grid with View Trends toggle -->
      <div class="dash-vitals-section">
        <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3">
          <h2 class="dash-title-2 mb-0">Vitals & Overview</h2>
          <button type="button" class="btn btn-secondary btn-sm" id="dashViewTrendsBtn" aria-expanded="false" aria-controls="dashTrendsChart">
            <i class="fas fa-chart-line" aria-hidden="true"></i> View Trends
          </button>
        </div>
        <div class="dash-stats-grid">
          <div class="dash-card dash-stat-card">
            <div class="dash-stat-icon primary"><i class="fas fa-heart-pulse"></i></div>
            <div class="dash-stat-value">72</div>
            <div class="dash-stat-label">Heart Rate (bpm)</div>
            <div class="dash-stat-meta">Last measured: 2 hours ago</div>
            <span class="dash-badge dash-badge--tooltip normal" data-status="stable" title="Stable: Within normal range. No immediate clinical concern.">Stable</span>
          </div>
          <div class="dash-card dash-stat-card">
            <div class="dash-stat-icon success"><i class="fas fa-tint"></i></div>
            <div class="dash-stat-value">120/80</div>
            <div class="dash-stat-label">Blood Pressure</div>
            <div class="dash-stat-meta">Last measured: 2 hours ago</div>
            <span class="dash-badge dash-badge--tooltip normal" data-status="stable" title="Stable: BP within normal range (120/80). Optimal cardiovascular status.">Stable</span>
          </div>
          <div class="dash-card dash-stat-card">
            <div class="dash-stat-icon warning"><i class="fas fa-weight"></i></div>
            <div class="dash-stat-value">72</div>
            <div class="dash-stat-label">Weight (kg)</div>
            <div class="dash-stat-meta">â†“ 2kg this month</div>
            <span class="dash-badge dash-badge--tooltip normal" data-status="stable" title="Stable: Healthy weight trend. Gradual loss is positive.">Stable</span>
          </div>
          <div class="dash-card dash-stat-card">
            <div class="dash-stat-icon primary"><i class="fas fa-calendar-check"></i></div>
            <div class="dash-stat-value">1</div>
            <div class="dash-stat-label">Upcoming Appointment</div>
            <div class="dash-stat-meta">Dr. Smith - Tomorrow</div>
          </div>
        </div>
        <!-- Hidden chart area - revealed by View Trends -->
        <div class="dash-trends-chart" id="dashTrendsChart" aria-hidden="true">
          <div class="dash-trends-chart-placeholder">
            <i class="fas fa-chart-area fa-3x dash-icon-primary mb-2" aria-hidden="true"></i>
            <p class="dash-caption mb-0">Vitals trend chart (Heart Rate, BP, Weight over last 30 days)</p>
            <p class="dash-caption small">Chart visualization would integrate with your EMR data API.</p>
          </div>
        </div>
      </div>

      <!-- Medical History & Lab Results -->
      <div class="dash-sections-grid">
        <div class="dash-card dash-card-full">
          <h2 class="dash-title-2 mb-4">Medical History</h2>
          <ul class="dash-timeline">
            <li class="dash-timeline-item">
              <div class="dash-timeline-dot"></div>
              <div class="dash-timeline-content">
                <div class="dash-meta mb-2">2 weeks ago</div>
                <div class="dash-title-3 mb-2">Cardiology Checkup</div>
                <p class="dash-caption mb-3">Annual heart health screening with Dr. James Smith. All vitals normal. Continue current medication regimen.</p>
                <a href="emr-portal/medical-history.html" class="btn btn-secondary btn-sm">View Details</a>
              </div>
            </li>
            <li class="dash-timeline-item">
              <div class="dash-timeline-dot"></div>
              <div class="dash-timeline-content">
                <div class="dash-meta mb-2">1 month ago</div>
                <div class="dash-title-3 mb-2">Blood Work Analysis</div>
                <p class="dash-caption mb-3">Complete blood count and metabolic panel. Results: All values within normal ranges.</p>
                <a href="emr-portal/lab-results.html" class="btn btn-secondary btn-sm">View Lab Results</a>
              </div>
            </li>
            <li class="dash-timeline-item">
              <div class="dash-timeline-dot"></div>
              <div class="dash-timeline-content">
                <div class="dash-meta mb-2">3 months ago</div>
                <div class="dash-title-3 mb-2">Chest X-Ray Imaging</div>
                <p class="dash-caption mb-3">Routine chest imaging for annual physical. No abnormalities detected.</p>
                <a href="emr-portal/imaging.html" class="btn btn-secondary btn-sm">View Imaging</a>
              </div>
            </li>
          </ul>
        </div>

        <!-- Lab Results -->
        <div class="dash-card dash-card-full">
          <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-4">
            <h2 class="dash-title-2 mb-0">Recent Lab Results</h2>
            <div class="d-flex gap-2 align-items-center flex-wrap">
              <input type="text" class="dash-filter-input" id="dashLabFilter" placeholder="Filter by test name..." aria-label="Filter lab results">
              <a href="emr-portal/lab-results.html" class="btn btn-secondary btn-sm">View All Results</a>
            </div>
          </div>

          <!-- Desktop: Table -->
          <div class="dash-lab-table-wrap">
            <table class="dash-lab-table">
              <thead>
                <tr>
                  <th>Test Name</th>
                  <th>Result</th>
                  <th>Normal Range</th>
                  <th>Status</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody data-filterable="lab">
                <tr data-filter-text="blood glucose fasting">
                  <td><strong>Blood Glucose</strong><br><span class="dash-caption">Fasting</span></td>
                  <td>95 mg/dL</td>
                  <td>70-100 mg/dL</td>
                  <td><span class="dash-badge dash-badge--tooltip normal" data-status="normal" title="Normal: Result within reference range. No clinical action needed.">Normal</span></td>
                  <td>Jan 15, 2024</td>
                </tr>
                <tr data-filter-text="cholesterol total lipid panel">
                  <td><strong>Cholesterol (Total)</strong><br><span class="dash-caption">Lipid Panel</span></td>
                  <td>185 mg/dL</td>
                  <td>&lt;200 mg/dL</td>
                  <td><span class="dash-badge dash-badge--tooltip normal" data-status="normal" title="Normal: Total cholesterol within healthy range.">Normal</span></td>
                  <td>Jan 15, 2024</td>
                </tr>
                <tr data-filter-text="hdl cholesterol good">
                  <td><strong>HDL Cholesterol</strong><br><span class="dash-caption">Good Cholesterol</span></td>
                  <td>52 mg/dL</td>
                  <td>&gt;40 mg/dL</td>
                  <td><span class="dash-badge dash-badge--tooltip normal" data-status="normal" title="Normal: HDL (good cholesterol) at protective level.">Normal</span></td>
                  <td>Jan 15, 2024</td>
                </tr>
                <tr data-filter-text="hemoglobin a1c diabetes screening">
                  <td><strong>Hemoglobin A1C</strong><br><span class="dash-caption">Diabetes Screening</span></td>
                  <td>5.8%</td>
                  <td>&lt;5.7%</td>
                  <td><span class="dash-badge dash-badge--tooltip elevated" data-status="elevated" title="Elevated: Slightly above normal. May indicate prediabetes. Discuss with provider.">Elevated</span></td>
                  <td>Jan 10, 2024</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Mobile: Card List -->
          <div class="dash-lab-cards" data-filterable="lab-cards">
            <div class="dash-lab-card" data-filter-text="blood glucose fasting">
              <div class="dash-lab-card-header">
                <span class="dash-lab-card-title">Blood Glucose (Fasting)</span>
                <span class="dash-badge normal">Normal</span>
              </div>
              <div class="dash-lab-card-meta">
                <span>95 mg/dL</span>
                <span>70-100 mg/dL</span>
                <span>Jan 15, 2024</span>
              </div>
            </div>
            <div class="dash-lab-card" data-filter-text="cholesterol total">
              <div class="dash-lab-card-header">
                <span class="dash-lab-card-title">Cholesterol (Total)</span>
                <span class="dash-badge normal">Normal</span>
              </div>
              <div class="dash-lab-card-meta">
                <span>185 mg/dL</span>
                <span>&lt;200 mg/dL</span>
                <span>Jan 15, 2024</span>
              </div>
            </div>
            <div class="dash-lab-card" data-filter-text="hdl cholesterol">
              <div class="dash-lab-card-header">
                <span class="dash-lab-card-title">HDL Cholesterol</span>
                <span class="dash-badge normal">Normal</span>
              </div>
              <div class="dash-lab-card-meta">
                <span>52 mg/dL</span>
                <span>&gt;40 mg/dL</span>
                <span>Jan 15, 2024</span>
              </div>
            </div>
            <div class="dash-lab-card" data-filter-text="hemoglobin a1c">
              <div class="dash-lab-card-header">
                <span class="dash-lab-card-title">Hemoglobin A1C</span>
                <span class="dash-badge elevated">Elevated</span>
              </div>
              <div class="dash-lab-card-meta">
                <span>5.8%</span>
                <span>&lt;5.7%</span>
                <span>Jan 10, 2024</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Appointments & Medications Grid -->
      <div class="dash-sections-grid mt-4">
        <div class="dash-card">
          <h2 class="dash-title-2 mb-4">Upcoming Appointments</h2>
          <div class="dash-appt-card">
            <div class="d-flex justify-content-between align-items-start mb-2">
              <div>
                <h4 class="dash-title-3 mb-1">Dr. James Smith</h4>
                <p class="dash-meta mb-0">Cardiology - Follow-up Consultation</p>
              </div>
              <span class="dash-badge dash-badge--tooltip normal" data-status="confirmed" title="Confirmed: Appointment is scheduled and confirmed. Patient has been notified.">Confirmed</span>
            </div>
            <div class="dash-meta mb-2">
              <i class="fas fa-calendar me-2 dash-icon-primary"></i>Tomorrow, 2:30 PM<br>
              <i class="fas fa-map-marker-alt me-2 dash-icon-primary"></i>Room 204, Cardiology
            </div>
            <a href="emr-portal/appointments.html" class="btn btn-secondary btn-sm w-100">Reschedule</a>
          </div>
          <a href="index.html#appointment-widget" class="btn btn-primary w-100 mt-2">+ Book New Appointment</a>
        </div>

        <div class="dash-card">
          <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-4">
            <h2 class="dash-title-2 mb-0">Current Medications</h2>
            <input type="text" class="dash-filter-input" id="dashMedFilter" placeholder="Filter medications..." aria-label="Filter medications">
          </div>
          <div class="dash-med-list" data-filterable="meds">
          <div class="dash-med-card" data-filter-text="lisinopril">
            <div class="dash-med-icon primary">Rx</div>
            <div class="flex-grow-1">
              <h4 class="dash-title-3 mb-1">Lisinopril</h4>
              <p class="dash-meta mb-0">10mg - Once daily (Morning)</p>
              <p class="dash-caption mb-0">Prescribed: Dr. James Smith</p>
            </div>
            <button class="dash-btn-icon" aria-label="More options"><i class="fas fa-ellipsis-v"></i></button>
          </div>
          <div class="dash-med-card" data-filter-text="atorvastatin">
            <div class="dash-med-icon accent">Rx</div>
            <div class="flex-grow-1">
              <h4 class="dash-title-3 mb-1">Atorvastatin</h4>
              <p class="dash-meta mb-0">20mg - Once daily (Evening)</p>
              <p class="dash-caption mb-0">Prescribed: Dr. James Smith</p>
            </div>
            <button class="dash-btn-icon" aria-label="More options"><i class="fas fa-ellipsis-v"></i></button>
          </div>
          </div>
          <a href="emr-portal/prescriptions.html" class="btn btn-primary w-100">View Full Medication History</a>
        </div>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/emr-dashboard.js"></script>
</body>
</html>
